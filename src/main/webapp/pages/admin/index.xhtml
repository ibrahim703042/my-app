<ui:composition xmlns="http://www.w3.org/1999/xhtml"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:f="http://xmlns.jcp.org/jsf/core"
    xmlns:p="http://primefaces.org/ui"
    xmlns:component="http://xmlns.jcp.org/jsf/composite/component">
    
        <div class="surface-card p-4 border-round">
        
            <h:form id="form">
                <p:growl id="messages" showDetail="true" />
                <!--
                <p:messages id="messages" showDetail="true" closable="true">
                    <p:autoUpdate/>
                </p:messages>
                -->

                <p:toolbar>
                    <p:toolbarGroup>
                        
                        <p:commandButton 
                            value="Ajouter" 
                            icon="pi pi-plus" 
                            actionListener="#{adminController.clearForm}"
                            update=":dialogs-admin:manage-admin-content"
                            oncomplete="PF('manageAdminDialog').show()"
                            styleClass="ui-button-success" 
                            style="margin-right: .5rem"
                        >
                            <p:resetInput target=":dialogs-admin:manage-admin-content" />
                        </p:commandButton>
                        
                    </p:toolbarGroup>
                </p:toolbar>

                <p:dataTable
                    id="dt-administrateurs"
                    paginatorTemplate="{CurrentPageReport} {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
                    rowsPerPageTemplate="5,10,15"
                    paginator="true"
                    value="#{adminController.administrateurs}" 
                    var="administrateur" 
                    rowKey="#{administrateur.id}"
                    rows="4" 
                    paginatorPosition="bottom"
                    binding="#{table}" 
                    
                >
                    
                    <!--
                    <p:column headerText="" style="width: 5%">
                         <h:outputText value="#{table.rowIndex + 1}" />
                     </p:column>
                    -->

                     <p:column headerText="#"  style="width: 5%">
                        <h:outputText value="#{administrateur.id}" />
                     </p:column>
                    
                    <p:column headerText="Prenom" sortBy="#{administrateur.prenom}" filterBy="#{administrateur.prenom}" style="width: 15%">
                       <h:outputText value="#{administrateur.prenom}" />
                    </p:column>
                    
                     <p:column headerText="Email" sortBy="#{administrateur.email}" filterBy="#{administrateur.email}">
                        <h:outputText value="#{administrateur.email}" />
                     </p:column>

                    <p:column headerText="B.P" sortBy="#{administrateur.bp}" filterBy="#{administrateur.bp}" style="width: 10%">
                        <h:outputText value="#{administrateur.bp}" />
                    </p:column>
                    
                    
                    <p:column headerText="Role" sortBy="#{administrateur.nomRole}" filterBy="#{administrateur.nomRole}" style="width: 10%">
                        <h:outputText value="#{administrateur.nomRole}" />
                    </p:column>
                   

                    <!--
                     <p:column headerText="Date" sortBy="#{administrateur.date}" filterBy="#{administrateur.date}" >
                        <h:outputText value="#{administrateur.date}" />
                     </p:column>
                    -->
                    
                    <p:column exportable="false" class="flex justify-content-end" >
                        
                        <p:commandButton 
                            styleClass="permission-button ui-button-info mr-4"
                            value="Permission"
                            oncomplete="PF('managePermissionDialog').show()"
                            update=":dialogs-permission:manage-permission-content"
                            process="@this"
                        >
                            <f:setPropertyActionListener value="#{administrateur}" target="#{adminController.administrateur}" />
                            <p:resetInput target=":dialogs-permission:manage-permission-content" />
                        </p:commandButton>
                        
                        <p:commandButton
                            icon="pi pi-pencil" 
                            styleClass="edit-button rounded-button ui-button-success mr-4"
                            oncomplete="PF('manageAdminDialog').show()"
                            update=":dialogs-admin:manage-admin-content"
                            process="@this"
                        >
                            <f:setPropertyActionListener value="#{administrateur}" target="#{adminController.administrateur}" />
                            <p:resetInput target=":dialogs-admin:manage-admin-content" />
                        </p:commandButton>

                        
                        <p:commandButton
                            class="ui-button-warning rounded-button" 
                            icon="pi pi-trash"
                             ajax="false"
                            action="#{adminController.delete(administrateur.id)}"
                        >  
                        </p:commandButton>

                     </p:column>

                </p:dataTable>
            </h:form>
            <ui:include src="ajouter.xhtml" />
            <ui:include src="edit-adminisrateur.xhtml" />
            <ui:include src="permission.xhtml" />
        </div>
            
</ui:composition>
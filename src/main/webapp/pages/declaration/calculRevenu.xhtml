<ui:composition xmlns="http://www.w3.org/1999/xhtml"
    xmlns:ui="http://java.sun.com/jsf/facelets"
    template="/resources/templates/dashboardTemplate.xhtml"
    xmlns:p="http://primefaces.org/ui"
    xmlns:h="http://xmlns.jcp.org/jsf/html"
    xmlns:f="http://xmlns.jcp.org/jsf/core"
    xmlns:component="http://xmlns.jcp.org/jsf/composite/component">
    
    <ui:define name = "contents">
        <style>
            .a4-size {
                font-family: 'Times New Roman', Times, serif, Lucida Grand;
            }
            
            form .ui-inputtext {
                background-color: transparent;
                border-color: transparent;
            }
            
            body .ui-panelgrid .ui-panelgrid-cell {
                background-color: transparent;
            }
              
            body .ui-panelgrid .ui-panelgrid-cell .ui-inputtext {
                background-color: transparent;
                border-color: transparent;
            }
            
            .my-heading-row {
                background-color: var(--surface-c);
                font-weight: bold;
            }
            
        </style>
        
        <div class="a4-size" >
        
            <p:card style="width: auto" id="pnlPrint">
                <f:facet name="header" >
                    <div class="flex align-items-center justify-content-center">
                        <p:graphicImage name="image/logo.jpg" style="width: 50%; margin-top: 10px"/>
                    </div>
                    <div class="flex align-items-center justify-content-center font-bold mt-4" style="font-size: 20px">
                       DECLARATION UNIQUE DE L’IMPOT SUR LES REVENUS LOCATIFS
                       
                    </div>
                    
                </f:facet>
                
                <h:form id="form" class=" py-3">
                    
                    <div class="ui-fluid formgrid grid py-3">

                        <!-- ====================== Contribuable ===========================-->
                        
                        <div class="ui-fluid formgrid grid px-4">
                            <div class=" field col-12 md:col-12 font-medium text-500 mb-3">
                                A. IDENTIFICATION DU CONTRIBUABLE
                            </div>
                            <p:spacer height="20"/>
                            <!-- ======================first name and last name ====================== -->
                            <div class="field col-12 md:col-12">
                                <component:inputTextField
                                    label="Nom complet ou Raison Sociale"
                                    value="#{declarationMapped.nomContribuable}"
                                />
                            </div>

                            <!-- ======================address====================== -->

                            <div class="field col-12 md:col-4">
                                <component:inputTextField
                                    label="No"
                                    value="#{declarationMapped.idContribuable}"
                                />
                            </div>

                            <div class="field col-12 md:col-4">
                                <component:inputTextField
                                    label="Avenue/Rue"
                                    value="#{declarationMapped.nomAvenue}"
                                />
                            </div>

                            <div class="field col-12 md:col-4">
                                <component:inputTextField
                                    label="Colline/Quartier"
                                    value="#{declarationMapped.nomColline}"
                                />
                            </div>

                            <!-- ======================city & state====================== -->
                            <div class="field col-12 md:col-6">
                                <component:inputTextField
                                    label="Commune"
                                    value="#{declarationMapped.nomCommune}"
                                />
                            </div>

                            <div class="field col-12 md:col-6">
                                <component:inputTextField
                                    label="Province"
                                    value="#{declarationMapped.nomProvince}"
                                />
                            </div>

                            <!-- ======================contact====================== -->

                            <div class="field col-12 md:col-4">
                                <component:inputTextField
                                    label="B.P"
                                    value="#{declarationMapped.bpContribuable}"
                                />

                            </div>

                            <div class="field col-12 md:col-4">
                                <component:inputPhoneNumber
                                    label="Telephone"
                                    value="#{declarationMapped.telephoneContribuable}"
                                />
                            </div>

                            <div class="field col-12 md:col-4">
                                <component:inputTextField
                                    label="Email"
                                    value="#{declarationMapped.emailContribuable}"
                                />
                            </div>

                            <p:divider styleClass="ui-divider-dashed" />

                            <!-- ==================================== Representant Fiscale============================================= -->

                            <p:spacer height="40" />
                            <div class="field col-12 md:col-6 font-medium text-500 mb-3">
                                B. REPRESENTANT DU CONTRIBUABLE
                            </div>
                            <p:spacer height="20"/>
                            
                            <!-- ======================first name and last name ====================== -->
                            <div class="field col-12 md:col-12">
                                <component:inputTextField
                                    label="Nom et Prenom"
                                    value="#{declarationMapped.nomRepresentant} #{declarationMapped.prenomRepresentant}"
                                />
                            </div>

                            <!-- ======================address====================== -->

                            <div class="field col-12 md:col-4">
                                <component:inputTextField
                                    label="No"
                                    value="#{declarationMapped.idRepresentant}"
                                />
                            </div>

                            <div class="field col-12 md:col-4">
                                <component:inputTextField
                                    label="Avenue/Rue"
                                    value="#{declarationMapped.nomAvenue}"
                                />
                            </div>

                            <div class="field col-12 md:col-4">
                                <component:inputTextField
                                    label="Colline/Quartier"
                                    value="#{declarationMapped.nomColline}"
                                />
                            </div>

                            <!-- ======================city & state====================== -->
                            <div class="field col-12 md:col-6">
                                <component:inputTextField
                                    label="Commune"
                                    value="#{declarationMapped.nomCommune}"
                                />
                            </div>

                            <div class="field col-12 md:col-6">
                                <component:inputTextField
                                    label="Province"
                                    value="#{declarationMapped.nomProvince}"
                                />
                            </div>

                            <!-- ======================contact====================== -->

                            <div class="field col-12 md:col-4">
                                <component:inputTextField
                                    label="B.P"
                                    value="#{declarationMapped.bpRepresentant}"
                                />

                            </div>

                            <div class="field col-12 md:col-4">
                                <component:inputPhoneNumber
                                    label="Telephone"
                                    value="#{declarationMapped.telephoneRepresentant}"
                                />
                            </div>

                            <div class="field col-12 md:col-4">
                                <component:inputTextField
                                    label="Email"
                                    value="#{declarationMapped.emailRepresentant}"
                                />
                            </div>

                            <p:divider styleClass="ui-divider-dashed" />

                            <!-- ================= Abbattement ===================== -->

                            <p:spacer height="30" />

                            <div class="field col-12 md:col-6 font-medium text-500 mb-3">
                                C. ABBATTEMENT
                            </div>
                        </div>
                        
                        <!-- ======================Revenus Sous Sous Location===========================-->
                        <div class="field col-12 md:col-12">
                            <p:panelGrid 
                                columns="2" 
                                columnClasses="ui-grid-col-12,ui-grid-col-4,ui-grid-col-12,ui-grid-col-4"
                                layout="grid"
                                styleClass="ui-panelgrid-blank ui-fluid my-panel-grid"
                                style="border:0px none; background-color:transparent;"

                            >

                                 <p:row id="my-row-id" styleClass="my-heading-row" >
                                    C. REVENUS LOCTIF
                                </p:row>

                                 <p:outputLabel>
                                    <span>1. Loyers encaissés exonérés</span>
                                </p:outputLabel>
                                <p:inputNumber 
                                    placeholder="......" 
                                    value="#{revenuLocatif.loyerExonere}"
                                />

                                 <p:outputLabel>
                                    <span>2. Loyers encaissés imposables  (Annexes II) </span>
                                </p:outputLabel>
                                <p:inputNumber 
                                    placeholder="......" 
                                    value="#{revenuLocatif.loyerImposable}"
                                />

                                <h:outputLabel>
                                    <span>3. Charges incombant au propriétaire, payées par les locataires</span>
                                </h:outputLabel>
                                <p:inputNumber 
                                    placeholder="......" 
                                    value="#{revenuLocatif.chargeIncombat}"
                                />

                                <h:outputLabel>
                                    <span>4. Revenu brut (Ligne 2 + Ligne3)</span>
                                </h:outputLabel>
                                <p:inputNumber 
                                    placeholder="......" 
                                    value="#{revenuLocatif.revenuBrut}"
                                />

                                <h:outputLabel>
                                    <span>5.Déduction pour dépenses d’entretien (Ligne 4 × 40%) )</span>
                                </h:outputLabel>
                                <p:inputNumber 
                                    placeholder="......" 
                                    value="#{revenuLocatif.deductionDepenses}"
                                />

                                <h:outputLabel>
                                    <span>6. Intérêts des emprunts contractés pour l’acquisition,
                                        la construction ou le renouvellement des immeubles productifs
                                        du revenu imposable effectivement payés durant l’exercice d’imposition  
                                    </span>
                                </h:outputLabel>
                                <p:inputNumber 
                                    placeholder="......" 
                                    value="#{revenuLocatif.interetEmprunt}"
                                />

                                <h:outputLabel>
                                    <b>
                                        7. Revenus nets imposables (Ligne 4 – Ligne 5– Ligne 6) 
                                    </b>
                                </h:outputLabel>
                                <p:inputNumber 
                                    placeholder="......" 
                                    value="#{revenuLocatif.revenuNetImposable}"
                                />


                            </p:panelGrid>
                        </div>

                        <!-- ======================D. REVENUS DES SOUS-LOCATIONS ===========================-->
                        <div class="field col-12 md:col-12">
                            <p:panelGrid 
                                columns="2" 
                                columnClasses="ui-grid-col-12,ui-grid-col-4,ui-grid-col-12,ui-grid-col-4"
                                layout="grid"
                                styleClass="ui-panelgrid-blank ui-fluid my-panel-grid"
                                style="border:0px none; background-color:transparent;"

                            >

                                 <p:row styleClass="my-heading-row" >
                                    D. REVENUS DES SOUS-LOCATIONS 
                                </p:row>

                                 <p:outputLabel>
                                    <span>8. Recettes des sous-locations</span>
                                </p:outputLabel>
                                <p:inputNumber 
                                    placeholder="......" 
                                    value="#{revenuSousLocation.recetteSousLocation}"
                                />

                                 <p:outputLabel>
                                    <span>9. Loyers payés pour la location des immeubles et terrains donnés en sous-location</span>
                                </p:outputLabel>
                                <p:inputNumber 
                                    placeholder="......" 
                                    value="#{revenuSousLocation.loyerPayes}"
                                />

                                <h:outputLabel>
                                    <b>10. Revenus nets imposables (Ligne 8 – Ligne 9) </b>
                                </h:outputLabel>
                                <p:inputNumber 
                                    placeholder="......" 
                                    value="#{revenuSousLocation.revenusNetsImposables}"
                                />

                                <h:outputLabel>
                                    <b>11. Total revenus nets imposables (Ligne 7+Ligne 10)  </b>
                                </h:outputLabel>
                                <p:inputNumber 
                                    placeholder="......" 
                                    value="#{revenuSousLocation.totalRevenusNetsImposables}"
                                />

                                <h:outputLabel>
                                    <span>12. Abattements </span>
                                </h:outputLabel>
                                <p:inputNumber 
                                    placeholder="......" 
                                    value="#{revenuSousLocation.abbattements}"
                                />

                                <h:outputLabel>
                                    <span class="text-primary">
                                        13. REVENU NET IMPOSABLE (Ligne 11- Ligne 12)
                                    </span>
                                </h:outputLabel>
                                <p:inputNumber 
                                    placeholder="......" 
                                    value="#{revenuSousLocation.revenuSousNetImposable}"
                                />

                            </p:panelGrid>
                        </div>

                        <!-- ====================== E. DETERMINATION DE L’IMPOT DU ===========================-->
                        <div class="field col-12 md:col-12">
                            <p:panelGrid style="margin-top:20px">
                                <f:facet name="header">
                                    <p:row styleClass="ui-primary">
                                        <p:column colspan="9">

                                            <h3>E. DETERMINATION DE L’IMPOT DU </h3>
                                            <p:spacer height="10" />
                                            <h5>1. Personnes Physiques et Morales </h5>
                                        </p:column>
                                    </p:row>

                                    <p:row>
                                        <p:column styleClass="text-primary" >COL 1</p:column>
                                        <p:column styleClass="text-primary" colspan="2">COL 2</p:column>
                                        <p:column styleClass="text-primary" colspan="2">COL 3</p:column>
                                        <p:column styleClass="text-primary" colspan="2">COL 4</p:column>
                                        <p:column styleClass="text-primary" colspan="2">COL 5</p:column>
                                    </p:row>

                                </f:facet>

                                <p:row>
                                    <p:column styleClass="text-primary" style="font-weight: bold;">
                                        Lignes
                                    </p:column>
                                    <p:column colspan="2" styleClass="text-primary" style="font-weight: bold;">
                                        Tranches de revenus annuels nets imposables
                                    </p:column>
                                    <p:column colspan="2" styleClass="text-primary" style="font-weight: bold;">
                                        Montant
                                    </p:column>
                                    <p:column colspan="2" styleClass="text-primary" style="font-weight: bold;">
                                        Taux d’imposition
                                    </p:column>
                                    <p:column colspan="2" styleClass="text-primary" style="font-weight: bold;">
                                        Impôt correspondant
                                    </p:column>
                                </p:row>

                                <p:row>
                                    <p:column colspan="" styleClass="text-primary" >14</p:column>
                                    <p:column colspan="2" styleClass="text-primary" >0 – 1 800 000 FBU</p:column>
                                    <p:column colspan="2" styleClass="text-primary" >
                                        <p:inputNumber placeholder="......." value="#{impot.montant_Col_3}" rendered="true"/>
                                    </p:column>
                                    <p:column colspan="2" styleClass="text-primary" >0%</p:column>
                                    <p:column colspan="2" styleClass="text-primary" >
                                        <p:inputNumber placeholder="....... " value="#{impot.tranche_1_Col_5}" />
                                    </p:column>
                                </p:row>

                                <p:row>
                                    <p:column colspan="" styleClass="text-primary" >15</p:column>
                                    <p:column colspan="2" styleClass="text-primary" >
                                        1 800 001 – 3 600 000 FBU 
                                    </p:column>
                                    <p:column colspan="2" styleClass="text-primary" >
                                        <p:inputNumber placeholder="......." value="#{impot.montant_Col_3}" rendered="true"/>
                                    </p:column>
                                    <p:column colspan="2" styleClass="text-primary" >
                                        20% de la part qui dépasse 1 800 000 FBU
                                    </p:column>
                                    <p:column colspan="2" styleClass="text-primary" >
                                        <p:inputNumber placeholder="......." value="#{impot.tranche_2_Col_5}"/>
                                    </p:column>
                                </p:row>

                                <p:row>
                                    <p:column colspan="" styleClass="text-primary" >16</p:column>
                                    <p:column colspan="2" styleClass="text-primary" >
                                        Plus de 3 600 000 FBU
                                    </p:column>
                                    <p:column colspan="2" styleClass="text-primary" >
                                        <p:inputNumber placeholder="......." value="#{impot.montant_Col_3}" rendered="true"/>
                                    </p:column>
                                    <p:column colspan="2" styleClass="text-primary" >
                                        30% de la part qui dépasse 3600 000 FBU 
                                    </p:column>
                                    <p:column colspan="2" styleClass="text-primary" >
                                        <p:inputNumber placeholder="......." value="#{impot.tranche_3_Col_5}"/>
                                    </p:column>
                                </p:row>


                                <p:row>
                                    <p:column colspan="" styleClass="text-primary" >17</p:column>
                                    <p:column colspan="6" styleClass="text-primary" style="font-weight: bold;" >
                                        Impôt total dû (Ligne 14+ Ligne 15+ Ligne 16)
                                    </p:column>
                                    <p:column colspan="2" styleClass="text-primary" style="font-weight: bold;" >
                                        <p:inputNumber placeholder="......." value="#{impot.impotTotalDu}"/>
                                    </p:column>
                                </p:row>

                                <p:row>
                                    <p:column colspan="" styleClass="text-primary" >18</p:column>
                                    <p:column colspan="6" styleClass="text-primary" style="font-weight: bold;" >
                                        Acomptes sur l’impôt locatif déjà payés
                                    </p:column>
                                    <p:column colspan="2" styleClass="text-primary" style="font-weight: bold;" >
                                        <p:inputNumber placeholder="......." value="#{impot.accompteImpotDejaPaye}"/>
                                    </p:column>
                                </p:row>

                                <p:row>
                                    <p:column colspan="" styleClass="text-primary" >19</p:column>
                                    <p:column colspan="6" styleClass="text-primary" style="font-weight: bold;">
                                       Total restant dû (Ligne 17- Ligne 18)
                                    </p:column>
                                    <p:column colspan="2" styleClass="text-primary" style="font-weight: bold;">
                                        <p:inputNumber placeholder="......." value="#{impot.totalRestantDu}"/>
                                    </p:column>
                                </p:row>

                            </p:panelGrid>

                        </div>

                        <!-- ======================F. RESERVE A L’ADMINISTRATION FISCALE ===========================-->
                        <p:spacer height="10"/>
                        <div class="field col-12 md:col-12">
                            <p:panelGrid style="margin-top:20px; width: 100%">

                                <!--======================= Amande =====================-->
                                <f:facet name="header">
                                    <p:row styleClass="ui-primary">
                                        <p:column colspan="3" style="text-align: left">
                                            <h3>F. RESERVE A L’ADMINISTRATION FISCALE </h3>
                                        </p:column>
                                    </p:row>

                                </f:facet>

                                <p:row>
                                    <p:column colspan="" style="font-weight: bold;">
                                       Amende fixe pour retard de déclaration et pénalités pour retard de paiement (BIF) :
                                    </p:column>
                                    <p:column colspan="2"/>

                                </p:row>

                                <p:row>
                                    <p:column colspan="" >
                                        20. Base (Ligne 19)
                                    </p:column>
                                    <p:column colspan="2" styleClass="text-primary" >
                                        <p:inputNumber placeholder="......."/>
                                    </p:column>
                                </p:row>

                                <p:row>
                                    <p:column colspan="" >
                                        21. Amende fixe
                                    </p:column>
                                    <p:column colspan="2" styleClass="text-primary" >
                                        <p:inputNumber placeholder="......."/>
                                    </p:column>
                                </p:row>

                                <p:row>
                                    <p:column colspan="" >
                                        22. Pénalités pour paiement tardif (10%)
                                    </p:column>
                                    <p:column colspan="2" styleClass="text-primary" >
                                        <p:inputNumber placeholder="......."/>
                                    </p:column>
                                </p:row>

                                <p:row>
                                    <p:column colspan="" style="font-weight: bold;" >
                                        23. Total amendes et pénalités (Lignes 21 + 22)
                                    </p:column>
                                    <p:column colspan="2" styleClass="text-primary" >
                                        <p:inputNumber placeholder="......."/>
                                    </p:column>
                                </p:row>

                            </p:panelGrid>

                        </div>

                        <!-- ====================== BUTTON  ===========================-->
                        <div class="field col-12 md:col-10"></div>
                        <div class="field col-12 md:col-2">
                            <p:commandButton 
                                value="Calculer"
                                ajax="false"
                                action="#{revenusController.save(revenuLocatif)}"
                                style="height: 41px; "
                            />
                        </div>
                    </div>
                    

                    </h:form>
                
                
                
                
                
                <f:facet name="footer">
                    <p:commandButton value="Print (custom configuration)" type="button" icon="pi pi-print" styleClass="shadow-1 mb-3">
                        <p:printer 
                            target="pnlPrint" 

                        />
                    </p:commandButton>
                </f:facet>
            </p:card>
            
            
            
        </div>
        
            
    </ui:define>
        
</ui:composition>
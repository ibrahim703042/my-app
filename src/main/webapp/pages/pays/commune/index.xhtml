<ui:composition xmlns="http://www.w3.org/1999/xhtml"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:f="http://xmlns.jcp.org/jsf/core"
    xmlns:p="http://primefaces.org/ui"
    xmlns:component="http://xmlns.jcp.org/jsf/composite/component">
    
<!--    <f:metadata>
        <f:event listener="" type="preRenderView" />
    </f:metadata>-->
    
        <h:form>
           <p:dataTable 
               paginator="true" 
               rows="4"
               widgetVar="dtCommunes"
               paginatorPosition="bottom"
               binding="#{table}" 
               value="#{communeController.communeList()}" 
               var="commun"
               rowKey="#{commun.nomCommune}">

               <f:facet name="header">
                   <div class="flex justify-content-between">
                        <span 
                           style="font-weight: bold;
                           font-size: 18px; text-transform: uppercase">
                            LISTE
                        </span>
                        <span class="filter-container ui-input-icon-left"> 
                            <i class="pi pi-search icon"></i>
                            <p:inputText 
                                id="globalFilter" 
                                onkeyup="PF('dtCommunes').filter()" 
                                placeholder="Search...." 
                            />
                        </span>
                    </div>
                </f:facet>

               <p:column headerText="#">
                   <h:outputText value="#{table.rowIndex + 1}" />
               </p:column>

               <!-- 
               <p:column 
                   headerText="CommuneId" 
                   sortBy="#{commun.id}" 
                   filterBy="#{commun.id}"
               >
                   <h:outputText value="#{commun.id}" />
               </p:column>
               -->

               <p:column headerText="Province" >
                   <h:outputText value="#{commun.nomProvince}" />
               </p:column>

               <p:column headerText="Commune" >
                   <h:outputText value="#{commun.nomCommune}" />
               </p:column>

           <p:column exportable="false" style="width: 10%" >
               <p:commandButton 
                   icon="pi pi-pencil" 
                   styleClass="edit-button rounded-button ui-button-success mr-4" 
                   ajax="false"
                   action="#{communeController.edit(commun.id)}"
                   >

               </p:commandButton>
               <p:commandButton 
                   class="ui-button-warning rounded-button" 
                   icon="pi pi-trash"
                   ajax="false"
                   action="#{communeController.delete(commun.id)}"
                   >

               </p:commandButton>
           </p:column>
           </p:dataTable>
       </h:form>
            
</ui:composition>